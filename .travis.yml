
language: node_js
node_js:
  - "6"
services:
  - docker
before_install:
  - docker pull node:6.3.0-slim
  - docker pull mongo:3.2
  - docker run --name mongo-test -d mongo
  - docker build -t xotl/wize-challenge .
  - docker run -d --name wize-challenge --link mongo-test:mongodb -e MONGODB_CONNECTION_STRING=mongodb://mongodb/exampledb -p 3000:3000 xotl/wize-challenge
  - docker ps -a
install:
  - npm install
script:
  - bundle exec npm start
after_success:
 - echo "Build succeded"